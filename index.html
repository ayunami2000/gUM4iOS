<!DOCTYPE html5>
<html>
<head>
<title>getUserMedia Demo</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>
function amplifyMedia(mediaElem,multiplier){
var context=new (window.AudioContext||window.webkitAudioContext),result={context:context,source:context.createMediaElementSource(mediaElem),gain:context.createGain(),media:mediaElem,amplify:function(multiplier){result.gain.gain.value=multiplier;},getAmpLevel:function(){return result.gain.gain.value;}};
result.source.connect(result.gain);
result.gain.connect(context.destination);
result.amplify(multiplier);
return result;
}
function gUM(fcng){
navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;
navigator.mediaDevices.getUserMedia=navigator.mediaDevices.getUserMedia||navigator.mediaDevices.webkitGetUserMedia;
if(navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({audio:true,video:{facingMode:fcng}}).then(function(stream){document.querySelector("video").srcObject=stream;}).catch(alert);}else if(navigator.getUserMedia){navigator.getUserMedia({audio:true,video:{facingMode:fcng}},function(stream){document.querySelector("video").srcObject=stream;},function(err){alert('[Deprecated gUM] '+err);});}else{alert("getUserMedia not supported");}
}
</script>
</head>
<body style="text-align:center;" onload="document.querySelector('input').checked=document.querySelectorAll('input')[1].checked=0;">
Front Cam gUM: <input type="radio" name="selCam" value="user" onchange="gUM(this.value);this.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.onchange();"/><br>
Back Cam gUM: <input type="radio" name="selCam" value="environment" onchange="gUM(this.value);this.nextElementSibling.nextElementSibling.onchange();"/><br>
Other Video Capture Device: <input type="radio" name="selCam" value="other" onchange="this.nextElementSibling.nextElementSibling.disabled=!this.checked;"/><br>
<input type="select" name="selCam" onchange="gUM(this.value);" disabled/><br>
<video onloadedmetadata="this.play();amplifyMedia(this,2);" style="width:50%;display:inline-block;" playsinline></video>
</body>
</html>
