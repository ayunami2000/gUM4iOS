<!DOCTYPE html5>
<html>
<head>
<title>gUM4iOS</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>
function amplifyMedia(mediaElem, multiplier) {
  var context = new (window.AudioContext || window.webkitAudioContext),
      result = {
        context: context,
        source: context.createMediaElementSource(mediaElem),
        gain: context.createGain(),
        media: mediaElem,
        amplify: function(multiplier) { result.gain.gain.value = multiplier; },
        getAmpLevel: function() { return result.gain.gain.value; }
      };
  result.source.connect(result.gain);
  result.gain.connect(context.destination);
  result.amplify(multiplier);
  return result;
}
function gUM(fcng){
navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||
navigator.mozGetUserMedia;
if(navigator.getUserMedia){
  navigator.getUserMedia({audio:true,video:{facingMode:fcng}},
    function(stream){
      webcamstream=stream;
      document.querySelector("video").srcObject = stream;
      document.querySelector("video").onloadedmetadata = function(e) {
        document.querySelector("video").play();
        document.querySelector
        amplifyMedia(document.querySelector("video"),2);
      };
    },function(err){alert("The following error occurred: " + err.name);}
  );
}else{
 alert("getUserMedia not supported");
}
}
</script>
</head>
<body>
<button onclick="gUM('user');">Front Camera gUM</button>
<br>
<button onclick="gUM('environment');">Back Camera gUM</button>
<br>
<input type="checkbox" oninput="this.checked?streamrec=webcamstream.record():streamrec.getRecordedData(function(blob){alert(blob);});">Record</button>
<br>
<video style="width:100%;display:inline-block;" playsinline></video>
</body>
</html>
